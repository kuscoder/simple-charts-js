(function(O,i){typeof exports=="object"&&typeof module<"u"?module.exports=i():typeof define=="function"&&define.amd?define(i):(O=typeof globalThis<"u"?globalThis:O||self,O.SimpleGraphsJS=i())})(this,function(){"use strict";var D=Object.defineProperty;var n=(O,i,E)=>i in O?D(O,i,{enumerable:!0,configurable:!0,writable:!0,value:E}):O[i]=E;var h=(O,i,E)=>(n(O,typeof i!="symbol"?i+"":i,E),E);const i=class i{constructor(t,s={}){h(this,"WIDTH");h(this,"HEIGHT");h(this,"PADDING");h(this,"ROWS_COUNT");h(this,"MONTHS_NAMES");h(this,"TEXT_FONT");h(this,"TEXT_COLOR");h(this,"COLUMNS");h(this,"DATES");h(this,"DPI_WIDTH");h(this,"DPI_HEIGHT");h(this,"VIEW_WIDTH");h(this,"VIEW_HEIGHT");h(this,"BOUNDARIES");h(this,"X_RATIO");h(this,"Y_RATIO");h(this,"ROWS_STEP");h(this,"TEXT_STEP");h(this,"DATE_COUNT");h(this,"DATE_STEP");h(this,"canvas");h(this,"ctx");var T,e,a,I,l;this.WIDTH=s.width||i.DEFAULT_OPTIONS.width,this.HEIGHT=s.height||i.DEFAULT_OPTIONS.height,this.PADDING=s.padding||i.DEFAULT_OPTIONS.padding,this.ROWS_COUNT=s.rows||i.DEFAULT_OPTIONS.rows,this.MONTHS_NAMES=((T=s.i18n)==null?void 0:T.months)||i.DEFAULT_OPTIONS.i18n.months,this.TEXT_FONT=((e=s.style)==null?void 0:e.textFont)||i.DEFAULT_OPTIONS.style.textFont,this.TEXT_COLOR=((a=s.style)==null?void 0:a.textColor)||i.DEFAULT_OPTIONS.style.textColor,this.COLUMNS=((I=s.data)==null?void 0:I.columns)||i.DEFAULT_OPTIONS.data.columns,this.DATES=((l=s.data)==null?void 0:l.dates)||i.DEFAULT_OPTIONS.data.dates,this.DPI_WIDTH=this.WIDTH*2,this.DPI_HEIGHT=this.HEIGHT*2,this.VIEW_WIDTH=this.DPI_WIDTH,this.VIEW_HEIGHT=this.DPI_HEIGHT-this.PADDING*2,this.BOUNDARIES=this.getBoundaries(),this.X_RATIO=this.VIEW_WIDTH/(this.COLUMNS[0].values.length-1),this.Y_RATIO=this.VIEW_HEIGHT/(this.BOUNDARIES[1]-this.BOUNDARIES[0]),this.COLUMNS=this.prepareColumns(),this.ROWS_STEP=this.VIEW_HEIGHT/this.ROWS_COUNT,this.TEXT_STEP=(this.BOUNDARIES[1]-this.BOUNDARIES[0])/this.ROWS_COUNT,this.DATE_COUNT=6,this.DATE_STEP=Math.round(this.DATES.length/this.DATE_COUNT),this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.canvas.style.width=this.WIDTH+"px",this.canvas.style.height=this.HEIGHT+"px",this.canvas.width=this.DPI_WIDTH,this.canvas.height=this.DPI_HEIGHT,this.draw()}static setDefaultOptions(t={}){var s,T,e,a,I;this.DEFAULT_OPTIONS.width=t.width||this.DEFAULT_OPTIONS.width,this.DEFAULT_OPTIONS.height=t.height||this.DEFAULT_OPTIONS.height,this.DEFAULT_OPTIONS.padding=t.padding||this.DEFAULT_OPTIONS.padding,this.DEFAULT_OPTIONS.rows=t.rows||this.DEFAULT_OPTIONS.rows,this.DEFAULT_OPTIONS.i18n.months=((s=t.i18n)==null?void 0:s.months)||this.DEFAULT_OPTIONS.i18n.months,this.DEFAULT_OPTIONS.style.textFont=((T=t.style)==null?void 0:T.textFont)||this.DEFAULT_OPTIONS.style.textFont,this.DEFAULT_OPTIONS.style.textColor=((e=t.style)==null?void 0:e.textColor)||this.DEFAULT_OPTIONS.style.textColor,this.DEFAULT_OPTIONS.data.columns=((a=t.data)==null?void 0:a.columns)||this.DEFAULT_OPTIONS.data.columns,this.DEFAULT_OPTIONS.data.dates=((I=t.data)==null?void 0:I.dates)||this.DEFAULT_OPTIONS.data.dates}draw(){this.drawAxisX(),this.drawAxisY(),this.drawLines()}drawAxisX(){this.ctx.fillStyle=this.TEXT_COLOR,this.ctx.font=this.TEXT_FONT,this.ctx.beginPath();for(let t=1;t<=this.DATES.length;t+=this.DATE_STEP){let s=this.getDate(this.DATES[t-1]);this.ctx.fillText(s,this.getX(t),this.DPI_HEIGHT-10)}this.ctx.closePath()}drawAxisY(){this.ctx.lineWidth=1,this.ctx.strokeStyle="#bbbbbb",this.ctx.fillStyle=this.TEXT_COLOR,this.ctx.font=this.TEXT_FONT,this.ctx.beginPath();for(let t=1;t<=this.ROWS_COUNT;t++){let s=String(Math.round(this.BOUNDARIES[1]-this.TEXT_STEP*t)),T=t*this.ROWS_STEP+this.PADDING;this.ctx.fillText(s,5,T-10),this.ctx.moveTo(0,T),this.ctx.lineTo(this.DPI_WIDTH,T)}this.ctx.stroke(),this.ctx.closePath()}drawLines(){this.ctx.lineWidth=4;for(let t of this.COLUMNS){this.ctx.strokeStyle=t.color,this.ctx.beginPath();for(let[s,T]of t.values)this.ctx.lineTo(s,T);this.ctx.stroke(),this.ctx.closePath()}}getBoundaries(){let t=null,s=null;for(let T of this.COLUMNS)for(let e of T.values)t=t===null||e<t?e:t,s=s===null||e>s?e:s;return[t,s]}prepareColumns(){const t=[];for(let s of this.COLUMNS)s.values=s.values.map((T,e)=>[this.getX(e),this.getY(T)]),t.push(s);return t}getDate(t){const s=new Date(t),T=s.getDate(),e=s.getMonth(),a=this.MONTHS_NAMES;return`${T} ${a[e]}`}getX(t){return Math.floor(t*this.X_RATIO)}getY(t){return Math.floor(this.DPI_HEIGHT-this.PADDING-t*this.Y_RATIO)}};h(i,"DEFAULT_OPTIONS",{width:600,height:250,padding:40,rows:5,i18n:{months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},style:{textFont:"normal 20px Helvetica,sans-serif",textColor:"#96a2aa"},data:{columns:[],dates:[]}});let O=i;return O});
