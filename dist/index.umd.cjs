(function(r,a){typeof exports=="object"&&typeof module<"u"?a(exports):typeof define=="function"&&define.amd?define(["exports"],a):(r=typeof globalThis<"u"?globalThis:r||self,a(r.SimpleGraphsJS={}))})(this,function(r){"use strict";var g=Object.defineProperty;var S=(r,a,s)=>a in r?g(r,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[a]=s;var h=(r,a,s)=>(S(r,typeof a!="symbol"?a+"":a,s),s);class a extends Error{constructor(t){super(t),this.name="GraphError"}}class s extends a{constructor(t){super(t),this.name="GraphOptionsError"}}const p=class p{constructor(t,i={}){h(this,"WIDTH");h(this,"HEIGHT");h(this,"PADDING");h(this,"ROWS_COUNT");h(this,"MONTHS_NAMES");h(this,"X_AXIS_DATA");h(this,"Y_AXIS_DATA");h(this,"STYLES");h(this,"DPI_WIDTH");h(this,"DPI_HEIGHT");h(this,"VIEW_WIDTH");h(this,"VIEW_HEIGHT");h(this,"Y_BOUNDARIES");h(this,"X_RATIO");h(this,"Y_RATIO");h(this,"ROWS_STEP");h(this,"TEXT_STEP");h(this,"X_AXIS_DATA_COUNT");h(this,"X_AXIS_DATA_STEP");h(this,"container");h(this,"canvas");h(this,"ctx");var d;const e=p.getOptions(i),o=((d=e.data.xAxis)==null?void 0:d.values.length)||0,n=e.data.yAxis[0].values.length;this.WIDTH=e.width,this.HEIGHT=e.height,this.PADDING=e.padding,this.ROWS_COUNT=e.rowsCount,this.MONTHS_NAMES=e.i18n.months,this.X_AXIS_DATA=e.data.xAxis,this.Y_AXIS_DATA=e.data.yAxis,this.STYLES={textFont:e.style.textFont,textColor:e.style.textColor,secondaryColor:e.style.secondaryColor},this.DPI_WIDTH=this.WIDTH*2,this.DPI_HEIGHT=this.HEIGHT*2,this.VIEW_WIDTH=this.DPI_WIDTH,this.VIEW_HEIGHT=this.DPI_HEIGHT-this.PADDING*2,this.Y_BOUNDARIES=this.getBoundariesY(this.Y_AXIS_DATA),this.X_RATIO=this.VIEW_WIDTH/(n-1),this.Y_RATIO=this.VIEW_HEIGHT/(this.Y_BOUNDARIES[1]-this.Y_BOUNDARIES[0]),this.ROWS_STEP=this.VIEW_HEIGHT/this.ROWS_COUNT,this.TEXT_STEP=(this.Y_BOUNDARIES[1]-this.Y_BOUNDARIES[0])/this.ROWS_COUNT,this.X_AXIS_DATA_COUNT=6,this.X_AXIS_DATA_STEP=o&&Math.round(o/this.X_AXIS_DATA_COUNT),this.container=t,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.style.width=this.WIDTH+"px",this.canvas.style.height=this.HEIGHT+"px",this.canvas.width=this.DPI_WIDTH,this.canvas.height=this.DPI_HEIGHT,e.immediate&&this.initialize()}static validateOptions(t={}){const{width:i,height:e,padding:o,rowsCount:n,i18n:{months:d}={},data:{xAxis:l,yAxis:c}={},style:{textFont:y,textColor:f,secondaryColor:T}={},immediate:w}=t;if(i){if(typeof i!="number")throw new s("width should be a number");if(i<=0)throw new s("width should be greater than 0");if(i%2!==0)throw new s("width should be an even number")}if(e){if(typeof e!="number")throw new s("height should be a number");if(e<=0)throw new s("height should be greater than 0");if(e%2!==0)throw new s("height should be an even number")}if(o){if(typeof o!="number")throw new s("padding should be a number");if(o<0)throw new s("padding should be greater or equal to 0")}if(n){if(typeof n!="number")throw new s("rowsCount should be a number");if(n<=0)throw new s("rowsCount should be greater than 0")}if(d){if(!Array.isArray(d))throw new s("i18n.months should be an array");if(d.length!==12)throw new s("i18n.months should have 12 elements")}if(l){if(typeof l!="object")throw new s("data.xAxis should be an object");if(typeof l.type!="string")throw new s("data.xAxis.type should be a string");if(!["date"].includes(l.type))throw new s('data.xAxis.type should be "date"');if(!Array.isArray(l.values))throw new s("data.xAxis.values should be an array");l.type==="date"&&l.values.forEach((x,A)=>{if(typeof x!="number")throw new s(`data.xAxis.values[${A}] should be a number`)})}if(c){if(!Array.isArray(c))throw new s("data.columns should be an array");c.forEach((x,A)=>{if(typeof x.name!="string")throw new s(`data.yAxis[${A}].name should be a string`);if(typeof x.color!="string")throw new s(`data.yAxis[${A}].color should be a string`);if(!Array.isArray(x.values))throw new s(`data.yAxis[${A}].values should be an array`);x.values.forEach((O,I)=>{if(typeof O!="number")throw new s(`data.yAxis[${A}].values[${I}] should be a number`)})})}if(y&&typeof y!="string")throw new s("style.textFont should be a string");if(f&&typeof f!="string")throw new s("style.textColor should be a string");if(T&&typeof T!="string")throw new s("style.secondaryColor should be a string");if(w&&typeof w!="boolean")throw new s("immediate should be a boolean")}static getOptions(t={}){var i,e,o,n,d,l;return this.validateOptions(t),{width:t.width||this.presetOptions.width,height:t.height||this.presetOptions.height,padding:t.padding||this.presetOptions.padding,rowsCount:t.rowsCount||this.presetOptions.rowsCount,i18n:{months:((i=t.i18n)==null?void 0:i.months)||this.presetOptions.i18n.months},style:{textFont:((e=t.style)==null?void 0:e.textFont)||this.presetOptions.style.textFont,textColor:((o=t.style)==null?void 0:o.textColor)||this.presetOptions.style.textColor,secondaryColor:((n=t.style)==null?void 0:n.secondaryColor)||this.presetOptions.style.secondaryColor},data:{xAxis:((d=t.data)==null?void 0:d.xAxis)||this.presetOptions.data.xAxis,yAxis:((l=t.data)==null?void 0:l.yAxis)||this.presetOptions.data.yAxis},immediate:t.immediate??this.presetOptions.immediate}}static changePresetOptions(t={}){var i,e,o,n,d,l;this.validateOptions(t),this.presetOptions.width=t.width||this.presetOptions.width,this.presetOptions.height=t.height||this.presetOptions.height,this.presetOptions.padding=t.padding||this.presetOptions.padding,this.presetOptions.rowsCount=t.rowsCount||this.presetOptions.rowsCount,this.presetOptions.i18n.months=((i=t.i18n)==null?void 0:i.months)||this.presetOptions.i18n.months,this.presetOptions.style.textFont=((e=t.style)==null?void 0:e.textFont)||this.presetOptions.style.textFont,this.presetOptions.style.textColor=((o=t.style)==null?void 0:o.textColor)||this.presetOptions.style.textColor,this.presetOptions.style.secondaryColor=((n=t.style)==null?void 0:n.secondaryColor)||this.presetOptions.style.secondaryColor,this.presetOptions.data.xAxis=((d=t.data)==null?void 0:d.xAxis)||this.presetOptions.data.xAxis,this.presetOptions.data.yAxis=((l=t.data)==null?void 0:l.yAxis)||this.presetOptions.data.yAxis,this.presetOptions.immediate=t.immediate||this.presetOptions.immediate}initialize(){this.container.appendChild(this.canvas),this.draw()}destroy(){this.container.removeChild(this.canvas)}draw(){this.drawAxisX(),this.drawAxisY(),this.drawLines()}drawAxisX(){if(this.X_AXIS_DATA){this.ctx.fillStyle=this.STYLES.textColor,this.ctx.font=this.STYLES.textFont,this.ctx.beginPath();for(let t=1;t<=this.X_AXIS_DATA.values.length;t+=this.X_AXIS_DATA_STEP){const i=this.getDate(this.X_AXIS_DATA.values[t-1]);this.ctx.fillText(i,this.getX(t),this.DPI_HEIGHT-10)}this.ctx.closePath()}}drawAxisY(){this.ctx.lineWidth=1,this.ctx.strokeStyle=this.STYLES.secondaryColor,this.ctx.fillStyle=this.STYLES.textColor,this.ctx.font=this.STYLES.textFont,this.ctx.beginPath();for(let t=1;t<=this.ROWS_COUNT;t++){const i=String(Math.round(this.Y_BOUNDARIES[1]-this.TEXT_STEP*t)),e=t*this.ROWS_STEP+this.PADDING;this.ctx.fillText(i,5,e-10),this.ctx.moveTo(0,e),this.ctx.lineTo(this.DPI_WIDTH,e)}this.ctx.stroke(),this.ctx.closePath()}drawLines(){this.ctx.lineWidth=4;for(const t of this.Y_AXIS_DATA){this.ctx.strokeStyle=t.color,this.ctx.beginPath();for(let i=0;i<t.values.length;i++){const e=this.getX(i),o=this.getY(t.values[i]);this.ctx.lineTo(e,o)}this.ctx.stroke(),this.ctx.closePath()}}getBoundariesY(t){let i=null,e=null;for(const o of t)for(const n of o.values)i=i===null||n<i?n:i,e=e===null||n>e?n:e;return[i,e]}getDate(t){const i=new Date(t),e=i.getDate(),o=i.getMonth(),n=this.MONTHS_NAMES;return`${e} ${n[o]}`}getX(t){return Math.floor(t*this.X_RATIO)}getY(t){return Math.floor(this.DPI_HEIGHT-this.PADDING-t*this.Y_RATIO)}};h(p,"presetOptions",{width:600,height:250,padding:40,rowsCount:5,i18n:{months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},data:{xAxis:null,yAxis:[]},style:{textFont:"normal 20px Helvetica,sans-serif",textColor:"#96a2aa",secondaryColor:"#bbbbbb"},immediate:!0});let u=p;r.Graph=u,r.GraphError=a,r.GraphOptionsError=s,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
